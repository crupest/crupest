FROM certbot/certbot:latest
ARG CRUPEST_DOMAIN
ARG CRUPEST_AUTO_CERTBOT_ADDITIONAL_PACKAGES=""
ARG CRUPEST_AUTO_CERTBOT_POST_HOOK=""
ARG CRUPEST_AUTO_CERTBOT_RENEW_COMMAND=""
# install bash
ENV CRUPEST_DOMAIN=${CRUPEST_DOMAIN}
ENV CRUPEST_AUTO_CERTBOT_POST_HOOK=${CRUPEST_AUTO_CERTBOT_POST_HOOK}
ENV CRUPEST_AUTO_CERTBOT_RENEW_COMMAND=${CRUPEST_AUTO_CERTBOT_RENEW_COMMAND}
RUN apk add --no-cache bash ${CRUPEST_AUTO_CERTBOT_ADDITIONAL_PACKAGES} 
COPY daemon.bash /daemon.bash
VOLUME ["/var/www/certbot", "/etc/letsencrypt", "/var/lib/letsencrypt"]
ENTRYPOINT [ "/daemon.bash" ]
